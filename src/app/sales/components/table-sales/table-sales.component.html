<div class="card">

  <p-button
    label="Add Sale"
    icon="pi pi-plus"
    class="mb-5"
    (click)="visibleAddForm = true"/>


  <p-table
    [rowHover]="true"
    [value]="sales" [tableStyle]="{ 'min-width': '50rem' }"
  >
    <ng-template pTemplate="header">
      <tr>
        <th>Id</th>
        <th>Name</th>
        <th>Sale Date</th>
        <th>Total Cost</th>
        <th style="width: 1rem"></th>
        <th style="width: 1rem"></th>
      </tr>
    </ng-template>
    <ng-template pTemplate="body" let-sale>
      <tr>
        <td>{{ sale.id }}</td>
        <td>{{ sale.name }}</td>
        <td>{{ sale.saleDate }}</td>
        <td>{{ sale.totalCost }}</td>
        <td>
          <p-button
            severity="primary"
            icon="pi pi-pencil"
            (click)="onEditSale(sale)">
          </p-button>
        </td>

        <td>
          <p-button
            severity="danger"
            icon="pi pi-minus"
            (click)="deleteSale(sale.name)">
          </p-button>
        </td>

      </tr>
    </ng-template>
  </p-table>

  <!--  Formularios -->
  <!--  Formulario para editar el producto -->
  <p-dialog header="Edit Product {{selectedSale.name}} " [modal]="true" [(visible)]="visibleEditForm" [style]="{ width: '25rem' }">
    <div class="flex align-items-center gap-3 mt-2 mb-5">
      <label for="unitPrice" class="font-semibold w-6rem">Name</label>
      <input [disabled]="true" [(ngModel)]="saleToEdit.name" [value]="selectedSale.name" pInputText id="unitPrice" class="flex-auto" autocomplete="off" />
    </div>

    <div class="flex align-items-center gap-3 mt-2 mb-5">
      <label for="dateS" class="font-semibold w-6rem">Sale Date</label>
      <input  [(ngModel)]="saleToEdit.saleDate" [value]="selectedSale.name" pInputText id="dateS" class="flex-auto" autocomplete="off" />
    </div>

    <div class="flex align-items-center gap-3 mt-2 mb-5">
      <label for="cost" class="font-semibold w-6rem">Total Cost</label>
      <input  [(ngModel)]="saleToEdit.totalCost" [value]="selectedSale.name" pInputText id="cost" class="flex-auto" autocomplete="off" />
    </div>


    <div class="flex justify-content-end gap-2">
      <p-button label="Cancel" severity="secondary" (click)="visibleEditForm =false" />
      <p-button label="Save" (click)="updateSale()" />
    </div>
  </p-dialog>



<!-- Formulario para agregar una venta-->
  <p-dialog header="Add Sale" [modal]="true" [(visible)]="visibleAddForm" [style]="{ width: '25rem' }">
    <div class="flex align-items-center gap-3 mt-2 mb-5">
      <label for="name" class="font-semibold w-6rem">Name</label>
      <input [(ngModel)]="saleToAdd.name" [textContent]="currentDate" pInputText id="name" class="flex-auto" autocomplete="off" />
    </div>

    <div class="flex align-items-center gap-3 mb-5">
      <label for="date" class="font-semibold w-6rem">Sale Date</label>
      <input [(ngModel)]="saleToAdd.saleDate" value="sssss" pInputText id="date" class="flex-auto" autocomplete="off" />
    </div>

    <div class="flex align-items-center gap-3 mb-5">
      <label for="total" class="font-semibold w-6rem">Total Cost</label>
      <input [(ngModel)]="saleToAdd.totalCost" value="sasa"  pInputText id="total" class="flex-auto" autocomplete="off" />
    </div>

    <div class="flex justify-content-end gap-2">
      <p-button label="Cancel" severity="secondary" (click)="visibleEditForm =false" />
      <p-button label="Save" (click)="addSale()" />
    </div>
  </p-dialog>


<!-- Mensajes en pantalla -->
  <p-toast />
</div>



